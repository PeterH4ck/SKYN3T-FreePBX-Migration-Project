# ü§ñ TEMPLATES Y SCRIPTS DE AUTOMATIZACI√ìN SKYN3T

## üéØ OBJETIVO
Automatizar y estandarizar la configuraci√≥n de nuevas comunidades mediante templates y scripts reutilizables.

---

## üìã TEMPLATE DE CONFIGURACI√ìN COMUNIDAD

### Variables de Configuraci√≥n
```yaml
# CONFIGURACI√ìN BASE COMUNIDAD
COMMUNITY_NAME: "[NOMBRE_COMPLETO]"
COMMUNITY_CODE: "[CODIGO_UNICO]"
PHONE_NUMBER: "+56XXXXXXXXX"
LOCATION: "[CIUDAD, REGI√ìN]"
BUSINESS_TYPE: "[OFICINA|EDIFICIO|CONDOMINIO]"

# ROLES ESPEC√çFICOS
OFFICE_ROLE_NAME: "[oficina|administraci√≥n|recepci√≥n]"
SECURITY_ROLE_NAME: "[conserjer√≠a|seguridad|porter√≠a]"

# CONFIGURACI√ìN T√âCNICA
SIP_DOMAIN: "skyn3t-communities.sip.twilio.com"
CREDENTIAL_LIST_NAME: "[CODIGO]_Credentials"
MAIN_IVR_BIN: "[CODIGO]_Main_IVR"
ROUTING_BIN: "[CODIGO]_Call_Routing"
```

---

## üîê GENERADOR DE CREDENCIALES

### Script de Generaci√≥n de Passwords
```javascript
// generador_credenciales.js
function generateCommunityCredentials(communityCode, phoneNumber) {
    const credentials = {
        community_code: communityCode,
        phone_number: phoneNumber,
        office: {
            username: `${phoneNumber}-office`,
            password: `SKyn3t2025_${communityCode}_Office!`,
            display_name: `${communityCode} - Oficina`
        },
        security: {
            username: `${phoneNumber}-security`, 
            password: `SKyn3t2025_${communityCode}_Security!`,
            display_name: `${communityCode} - Conserjer√≠a`
        },
        credential_list_name: `${communityCode}_Credentials`
    };
    
    return credentials;
}

// Ejemplo de uso:
const credentials = generateCommunityCredentials("VALPARAISO", "+56322123456");
console.log(JSON.stringify(credentials, null, 2));
```

### Output Ejemplo:
```json
{
  "community_code": "VALPARAISO",
  "phone_number": "+56322123456",
  "office": {
    "username": "+56322123456-office",
    "password": "SKyn3t2025_VALPARAISO_Office!",
    "display_name": "VALPARAISO - Oficina"
  },
  "security": {
    "username": "+56322123456-security",
    "password": "SKyn3t2025_VALPARAISO_Security!",
    "display_name": "VALPARAISO - Conserjer√≠a"
  },
  "credential_list_name": "VALPARAISO_Credentials"
}
```

---

## üìû TEMPLATES TWIML DIN√ÅMICOS

### Template Main IVR
```xml
<!-- template_main_ivr.xml -->
<?xml version="1.0" encoding="UTF-8"?>
<Response>
    <Say voice="alice" language="es-MX">
        Bienvenido a {{COMMUNITY_NAME}}. 
        Para {{OFFICE_ROLE_NAME}}, presione 1.
        Para {{SECURITY_ROLE_NAME}}, presione 2.
    </Say>
    
    <Gather numDigits="1" action="{{ROUTING_BIN_URL}}" method="POST" timeout="10">
        <Say voice="alice" language="es-MX">
            Por favor, seleccione una opci√≥n.
        </Say>
    </Gather>
    
    <Say voice="alice" language="es-MX">
        No se detect√≥ ninguna selecci√≥n. Adi√≥s.
    </Say>
    <Hangup/>
</Response>
```

### Template Call Routing
```xml
<!-- template_call_routing.xml -->
<?xml version="1.0" encoding="UTF-8"?>
<Response>
    <Say voice="alice" language="es-MX">
        Conectando con {{OFFICE_ROLE_NAME}} de {{COMMUNITY_NAME}}.
    </Say>
    <Dial timeout="30" callerId="{{PHONE_NUMBER}}">
        <Sip>sip:{{PHONE_NUMBER}}-office@{{SIP_DOMAIN}}</Sip>
    </Dial>
    <Say voice="alice" language="es-MX">
        No se pudo completar la conexi√≥n con {{OFFICE_ROLE_NAME}}. Adi√≥s.
    </Say>
    <Hangup/>
</Response>
```

---

## üõ†Ô∏è GENERADOR DE TWIML

### Script JavaScript para Generar TwiML
```javascript
// twiml_generator.js
function generateTwiMLs(config) {
    const mainIVR = `<?xml version="1.0" encoding="UTF-8"?>
<Response>
    <Say voice="alice" language="es-MX">
        Bienvenido a ${config.COMMUNITY_NAME}. 
        Para ${config.OFFICE_ROLE_NAME}, presione 1.
        Para ${config.SECURITY_ROLE_NAME}, presione 2.
    </Say>
    
    <Gather numDigits="1" action="${config.ROUTING_BIN_URL}" method="POST" timeout="10">
        <Say voice="alice" language="es-MX">
            Por favor, seleccione una opci√≥n.
        </Say>
    </Gather>
    
    <Say voice="alice" language="es-MX">
        No se detect√≥ ninguna selecci√≥n. Adi√≥s.
    </Say>
    <Hangup/>
</Response>`;

    const callRouting = `<?xml version="1.0" encoding="UTF-8"?>
<Response>
    <Say voice="alice" language="es-MX">
        Conectando con ${config.OFFICE_ROLE_NAME} de ${config.COMMUNITY_NAME}.
    </Say>
    <Dial timeout="30" callerId="${config.PHONE_NUMBER}">
        <Sip>sip:${config.PHONE_NUMBER}-office@${config.SIP_DOMAIN}</Sip>
    </Dial>
    <Say voice="alice" language="es-MX">
        No se pudo completar la conexi√≥n. Adi√≥s.
    </Say>
    <Hangup/>
</Response>`;

    return {
        mainIVR: mainIVR,
        callRouting: callRouting
    };
}

// Configuraci√≥n ejemplo
const config = {
    COMMUNITY_NAME: "Oficina Valpara√≠so",
    OFFICE_ROLE_NAME: "oficina regional", 
    SECURITY_ROLE_NAME: "seguridad",
    PHONE_NUMBER: "+56322123456",
    SIP_DOMAIN: "skyn3t-communities.sip.twilio.com",
    ROUTING_BIN_URL: "https://handler.twilio.com/twiml/EH[ROUTING_BIN_ID]"
};

const twiml = generateTwiMLs(config);
console.log("=== MAIN IVR ===");
console.log(twiml.mainIVR);
console.log("\n=== CALL ROUTING ===");
console.log(twiml.callRouting);
```

---

## üìù CHECKLIST AUTOMATIZADO

### Template de Verificaci√≥n
```markdown
# CHECKLIST CONFIGURACI√ìN: {{COMMUNITY_NAME}}

## Pre-Configuraci√≥n
- [ ] N√∫mero de tel√©fono comprado: {{PHONE_NUMBER}}
- [ ] C√≥digo de comunidad definido: {{COMMUNITY_CODE}}
- [ ] Roles definidos: {{OFFICE_ROLE_NAME}} / {{SECURITY_ROLE_NAME}}

## Configuraci√≥n Twilio
- [ ] Credential List creada: {{CREDENTIAL_LIST_NAME}}
- [ ] Usuario office agregado: {{PHONE_NUMBER}}-office  
- [ ] Usuario security agregado: {{PHONE_NUMBER}}-security
- [ ] Credential List asociada al SIP Domain
- [ ] TwiML Bin Main IVR creado: {{MAIN_IVR_BIN}}
- [ ] TwiML Bin Call Routing creado: {{ROUTING_BIN}}
- [ ] TwiML Bins vinculados correctamente
- [ ] N√∫mero configurado ‚Üí Main IVR

## Testing
- [ ] Registro SIP exitoso (office)
- [ ] Registro SIP exitoso (security)  
- [ ] Llamada externa ‚Üí IVR funciona
- [ ] Opci√≥n "1" ‚Üí conecta con office
- [ ] Audio bidireccional correcto
- [ ] Sin errores en logs de Twilio

## Post-Configuraci√≥n  
- [ ] Documentaci√≥n actualizada
- [ ] Credenciales compartidas con responsables
- [ ] Configuraci√≥n Zoiper5 validada
- [ ] Sistema en producci√≥n

**Configurado por:** [NOMBRE]
**Fecha:** [FECHA]
**Tiempo total:** [XX minutos]
```

---

## üîß CONFIGURACIONES DE ZOIPER5

### Template de Configuraci√≥n Zoiper Office
```ini
[ZOIPER_CONFIG_OFFICE]
account_name={{COMMUNITY_NAME}} - {{OFFICE_ROLE_NAME}}
username={{PHONE_NUMBER}}-office
password={{OFFICE_PASSWORD}}
domain=skyn3t-communities.sip.twilio.com
port=5060
transport=UDP
stun_server=stun.twilio.com:3478
stun_port=3478
register=true
register_expires=1800
auth_username={{PHONE_NUMBER}}-office
display_name={{COMMUNITY_NAME}} Office
```

### Template de Configuraci√≥n Zoiper Security  
```ini
[ZOIPER_CONFIG_SECURITY]
account_name={{COMMUNITY_NAME}} - {{SECURITY_ROLE_NAME}}
username={{PHONE_NUMBER}}-security
password={{SECURITY_PASSWORD}}
domain=skyn3t-communities.sip.twilio.com
port=5060
transport=UDP
stun_server=stun.twilio.com:3478
stun_port=3478
register=true
register_expires=1800
auth_username={{PHONE_NUMBER}}-security
display_name={{COMMUNITY_NAME}} Security
```

---

## üìä DASHBOARD DE CONFIGURACI√ìN

### Template HTML para Dashboard Interno
```html
<!DOCTYPE html>
<html>
<head>
    <title>SKYN3T - Configuraci√≥n Comunidades</title>
    <style>
        .community { border: 1px solid #ccc; margin: 10px; padding: 15px; }
        .configured { background-color: #d4edda; }
        .pending { background-color: #fff3cd; }
        .error { background-color: #f8d7da; }
    </style>
</head>
<body>
    <h1>üè¢ SKYN3T - Estado de Comunidades</h1>
    
    <div class="community configured">
        <h3>‚úÖ Oficina Principal</h3>
        <p><strong>N√∫mero:</strong> +56229145248</p>
        <p><strong>Estado:</strong> Configurada y Operativa</p>
        <p><strong>Usuarios:</strong> 2 registrados</p>
        <p><strong>√öltima llamada:</strong> Hace 5 minutos</p>
    </div>
    
    <div class="community pending">
        <h3>‚è≥ Oficina Valpara√≠so</h3>
        <p><strong>N√∫mero:</strong> Por asignar</p>
        <p><strong>Estado:</strong> Pendiente configuraci√≥n</p>
        <p><strong>Progreso:</strong> 0% completado</p>
    </div>
    
    <div class="community pending">
        <h3>‚è≥ Edificio Laguna Sur</h3>
        <p><strong>N√∫mero:</strong> Por asignar</p>
        <p><strong>Estado:</strong> Pendiente configuraci√≥n</p>
        <p><strong>Progreso:</strong> 0% completado</p>
    </div>
    
    <div class="community pending">
        <h3>‚è≥ Condominio Colina</h3>
        <p><strong>N√∫mero:</strong> Por asignar</p>
        <p><strong>Estado:</strong> Pendiente configuraci√≥n</p>
        <p><strong>Progreso:</strong> 0% completado</p>
    </div>
</body>
</html>
```

---

## üéØ SCRIPT DE CONFIGURACI√ìN R√ÅPIDA

### Configurador Express (Pseudoc√≥digo)
```javascript
// quick_setup.js
async function configureNewCommunity(config) {
    console.log(`üèóÔ∏è Configurando comunidad: ${config.COMMUNITY_NAME}`);
    
    // Paso 1: Generar credenciales
    console.log("1Ô∏è‚É£ Generando credenciales...");
    const credentials = generateCommunityCredentials(
        config.COMMUNITY_CODE, 
        config.PHONE_NUMBER
    );
    
    // Paso 2: Crear TwiML Bins
    console.log("2Ô∏è‚É£ Generando TwiML Bins...");
    const twimlBins = generateTwiMLs(config);
    
    // Paso 3: Generar configuraciones Zoiper
    console.log("3Ô∏è‚É£ Generando configuraciones Zoiper...");
    const zoiperConfigs = generateZoiperConfigs(credentials, config);
    
    // Paso 4: Generar checklist
    console.log("4Ô∏è‚É£ Generando checklist...");
    const checklist = generateChecklist(config);
    
    // Paso 5: Mostrar resumen
    console.log("‚úÖ Configuraci√≥n generada exitosamente!");
    console.log("\nüìã SIGUIENTE PASOS:");
    console.log("1. Comprar n√∫mero de tel√©fono en Twilio");
    console.log("2. Crear Credential List en Twilio Console");
    console.log("3. Crear TwiML Bins con el c√≥digo generado");
    console.log("4. Configurar Zoiper5 con las credenciales");
    console.log("5. Probar sistema completo");
    
    return {
        credentials,
        twimlBins,
        zoiperConfigs,
        checklist
    };
}

// Configuraci√≥n de ejemplo
const valparaisoConfig = {
    COMMUNITY_NAME: "Oficina Valpara√≠so",
    COMMUNITY_CODE: "VALPARAISO",
    PHONE_NUMBER: "+56322123456",
    LOCATION: "Valpara√≠so, Chile",
    BUSINESS_TYPE: "OFICINA",
    OFFICE_ROLE_NAME: "oficina regional",
    SECURITY_ROLE_NAME: "seguridad",
    SIP_DOMAIN: "skyn3t-communities.sip.twilio.com"
};

// Ejecutar configuraci√≥n
configureNewCommunity(valparaisoConfig);
```

---

## üìã TEMPLATES DE DOCUMENTACI√ìN

### Template README por Comunidad
```markdown
# üìû {{COMMUNITY_NAME}} - SKYN3T

## üìä Informaci√≥n General
- **C√≥digo:** {{COMMUNITY_CODE}}
- **N√∫mero Principal:** {{PHONE_NUMBER}}
- **Ubicaci√≥n:** {{LOCATION}}
- **Tipo:** {{BUSINESS_TYPE}}

## üîê Credenciales de Acceso

### {{OFFICE_ROLE_NAME}}
- **Usuario:** {{PHONE_NUMBER}}-office
- **Contrase√±a:** {{OFFICE_PASSWORD}}
- **Zoiper5:** [Link a configuraci√≥n]

### {{SECURITY_ROLE_NAME}}  
- **Usuario:** {{PHONE_NUMBER}}-security
- **Contrase√±a:** {{SECURITY_PASSWORD}}
- **Zoiper5:** [Link a configuraci√≥n]

## üìû Uso del Sistema

### Para llamar desde exterior:
1. Marcar: {{PHONE_NUMBER}}
2. Escuchar men√∫ de opciones
3. Presionar "1" para {{OFFICE_ROLE_NAME}}
4. Presionar "2" para {{SECURITY_ROLE_NAME}}

### Para llamadas internas:
- {{OFFICE_ROLE_NAME}} ‚Üí {{SECURITY_ROLE_NAME}}: Marcar {{PHONE_NUMBER}}-security
- {{SECURITY_ROLE_NAME}} ‚Üí {{OFFICE_ROLE_NAME}}: Marcar {{PHONE_NUMBER}}-office

## üõ†Ô∏è Soporte T√©cnico
- **Sistema:** SKYN3T Multi-Tenant
- **Documentaci√≥n:** [Link a docs completas]
- **Contacto t√©cnico:** [Email/Tel√©fono]

---
**Configurado:** {{DATE}}
**Versi√≥n:** 1.0
```

---

## ‚ö° PROCESO DE CONFIGURACI√ìN EXPRESS

### Tiempo Estimado: 15 minutos por comunidad

```bash
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ PROCESO EXPRESS DE CONFIGURACI√ìN           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 1. Ejecutar script generador (2 min)       ‚îÇ
‚îÇ 2. Comprar n√∫mero en Twilio (2 min)        ‚îÇ
‚îÇ 3. Crear Credential List (3 min)           ‚îÇ  
‚îÇ 4. Crear TwiML Bins (5 min)                ‚îÇ
‚îÇ 5. Configurar n√∫mero ‚Üí IVR (1 min)         ‚îÇ
‚îÇ 6. Testing b√°sico (2 min)                  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ TOTAL: ~15 minutos por comunidad            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

**Estos templates y scripts permiten configurar nuevas comunidades SKYN3T de forma r√°pida, consistente y sin errores.**